apply plugin: 'java'
apply plugin: 'application'
// apply plugin: 'eclipse'

repositories {
    jcenter()
}

dependencies {
   compile 'args4j:args4j:2.33'
   compile files('myutils.jar')
}
 
version = 1.02
sourceCompatibility = JavaVersion.VERSION_1_8 
targetCompatibility = JavaVersion.VERSION_1_8
 
mainClassName = 'sam.apps.jbook_reader.Main'

task copy(type: Copy, dependsOn:'installDist') {
  from(fileTree("$buildDir/install/${distributions.main.baseName}"))
  into("$rootDir/compiled")
}

task zipCompiled(type: Zip){
  from "$rootDir/compiled"
  exclude '**/session.properties', '**/Thumbs.db'
  archiveName 'noter.zip'
  destinationDir rootDir
}
run {
    environment('APP_HOME', "$rootDir/compiled")
}
jar {
  manifest {
        attributes('Manifest-Version': '1.0',
                   'Implementation-Version': version,
                   'Main-Class':"$mainClassName",	
                   'Class-Path':'.'
                   )
    }
}

defaultTasks 'iD', 'copy'
